grafana:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt
    hosts:
      - grafana-dev.saitejasroboshop.store
    path: /
    tls:
    - secretName: grafana-general-tls
      hosts:
        - grafana-dev.saitejasroboshop.store
prometheus:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt
    hosts:
      - prometheus-dev.saitejasroboshop.store
    tls:
    - secretName: prometheus-general-tls
      hosts:
        - prometheus-dev.saitejasroboshop.store
  prometheusSpec:
    additionalScrapeConfigs:
    - job_name: 'ec2-nodes'
      relabel_configs:
      - source_labels: [__meta_ec2_instance_id]
        target_label: instance_id
      - source_labels: [__meta_ec2_tag_Name]
        target_label: name
      ec2_sd_configs:
        - region: us-east-1
          port: 9100
          filters:
            - name: "tag:monitor"
              values: ["true"]
    - job_name: 'ingress'
      static_configs:
        - targets: ["ingress-nginx-controller-metrics:10254"]

alertmanager:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt
    hosts:
      - alertmanager-dev.saitejasroboshop.store
    path: /
    tls:
    - secretName: alertmanager-general-tls
      hosts:
      - alertmanager-dev.saitejasroboshop.store

  config:
    global:
      resolve_timeout: 5m
    inhibit_rules:
      - source_matchers:
          - 'severity = critical'
        target_matchers:
          - 'severity =~ warning|info'
        equal:
          - 'namespace'
          - 'alertname'
      - source_matchers:
          - 'severity = warning'
        target_matchers:
          - 'severity = info'
        equal:
          - 'namespace'
          - 'alertname'
      - source_matchers:
          - 'alertname = InfoInhibitor'
        target_matchers:
          - 'severity = info'
        equal:
          - 'namespace'
      - target_matchers:
          - 'alertname = InfoInhibitor'
    route:
      receiver: 'emails'
    receivers:
      - name: 'emails'
        email_configs:
          - to: 'arunlal@abcdefg.com'
            from: 'email@devopsproject.dev'
            smarthost: 'email-smtp.us-west-2.amazonaws.com:587'
            auth_username: '$SMTP_user_name'
            auth_password: '$SMTP_password'
            send_resolved: false
    templates:
      - '/etc/alertmanager/config/*.tmpl'